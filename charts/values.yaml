global:
  nameOverride: ""
  fullnameOverride: ""

  imagePullSecrets: []

  labels: {}
  annotations: {}

  podLabels: {}
  podAnnotations: {}

  serviceAccount:
    create: false
    name: ""
    annotations: {}

  ingress:
    enabled: false
    className: ""
    annotations: {}
    tls: []

  resources: {}
  nodeSelector: {}
  tolerations: []
  affinity: {}

  podSecurityContext: {}
  securityContext: {}

  env: {}
  envFrom: []

# One or more workloads to deploy.
# Each workload creates:
# - Deployment
# - Service (optional)
# - Ingress (optional)
workloads:
  backend:
    enabled: true

    replicas: 1

    image:
      repository: ghcr.io/dhawalhost/leapmailr
      tag: "v0.2.0"
      pullPolicy: IfNotPresent

    containerPort: 8080

    service:
      enabled: true
      type: ClusterIP
      port: 8080

    ingress:
      enabled: true
      className: ""
      annotations: {}
      hosts:
        - host: api.leapmailr.dhawalhost.com
          paths:
            - path: /
              pathType: Prefix
              servicePort: 8080
      tls: []

    env:
      ENV_MODE: production
      PORT: "8080"

    # Load non-secret config + secrets from existing K8s objects
    envFrom:
      - configMapRef:
          name: leapmailr-backend-config
      - secretRef:
          name: leapmailr-backend-secrets

    resources: {}

    livenessProbe:
      httpGet:
        path: /health/live
        port: http
      initialDelaySeconds: 15
      periodSeconds: 10
      timeoutSeconds: 2
      failureThreshold: 6

    readinessProbe:
      httpGet:
        path: /health/ready
        port: http
      initialDelaySeconds: 5
      periodSeconds: 10
      timeoutSeconds: 2
      failureThreshold: 6
